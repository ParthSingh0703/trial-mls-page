<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trial MLS Residential Listing Form</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: #e0e0e0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #00d4ff;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
            font-size: 0.9rem;
        }

        .form-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .section-title {
            color: #00d4ff;
            font-size: 1.3rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(180deg, #00d4ff, #0078ff);
            border-radius: 2px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            h1 {
                font-size: 1.8rem;
                margin-bottom: 8px;
            }

            .subtitle {
                font-size: 0.8rem;
                margin-bottom: 20px;
            }

            .form-section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .section-title {
                font-size: 1.1rem;
                margin-bottom: 15px;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
                padding: 10px;
            }

            .radio-group {
                flex-direction: column;
                gap: 10px;
            }

            input[type="text"],
            input[type="number"],
            input[type="date"],
            select,
            textarea {
                padding: 10px 12px;
                font-size: 16px;
                /* Prevents zoom on iOS */
            }

            label {
                font-size: 0.9rem;
            }

            .submit-btn {
                width: 100%;
                padding: 14px 30px;
                font-size: 1rem;
            }

            .json-output pre {
                font-size: 0.75rem;
                padding: 15px;
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .form-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }

            .checkbox-group {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }

            .section-title {
                font-size: 1rem;
            }

            .section-title::before {
                width: 3px;
                height: 20px;
            }

            .checkbox-item,
            .radio-item {
                padding: 6px 10px;
            }

            .submit-btn {
                padding: 12px 25px;
                font-size: 0.95rem;
            }
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        label {
            color: #b0b0b0;
            font-size: 0.85rem;
            margin-bottom: 6px;
            font-weight: 500;
        }

        input[type="text"],
        input[type="number"],
        input[type="date"],
        select,
        textarea {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 12px 15px;
            color: #fff;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
        }

        select {
            cursor: pointer;
        }

        select option {
            background: #1a1a2e;
            color: #fff;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 10px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background 0.2s ease;
        }

        .checkbox-item:hover,
        .radio-item:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .checkbox-item input,
        .radio-item input {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #00d4ff;
        }

        .checkbox-item span,
        .radio-item span {
            color: #d0d0d0;
            font-size: 0.9rem;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #00d4ff, #0078ff);
            color: #fff;
            border: none;
            padding: 16px 50px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .json-output {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            display: none;
        }

        .json-output.visible {
            display: block;
        }

        .json-output h3 {
            color: #00d4ff;
            margin-bottom: 15px;
        }

        .json-output pre {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            color: #98fb98;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            line-height: 1.5;
            max-height: 600px;
            overflow-y: auto;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 212, 255, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 212, 255, 0.7);
        }

        /* Custom Multi-Select Dropdown Styles */
        .multi-select-container {
            position: relative;
            width: 100%;
        }

        .multi-select-header {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 12px 15px;
            color: #fff;
            font-size: 0.95rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .multi-select-header:hover {
            border-color: #00d4ff;
        }

        .multi-select-header::after {
            content: '‚ñº';
            font-size: 0.8rem;
            margin-left: 10px;
            color: #888;
        }

        .multi-select-options {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #1a1a2e;
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 8px;
            margin-top: 5px;
            max-height: 250px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .multi-select-options.open {
            display: block;
        }

        .multi-select-option {
            padding: 10px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #d0d0d0;
            transition: background 0.2s ease;
            gap: 10px;
        }

        .multi-select-option:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .multi-select-option.selected {
            background: rgba(0, 212, 255, 0.2);
            color: #fff;
        }

        .multi-select-option.selected::after {
            content: '‚úì';
            color: #00d4ff;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üè† Trial MLS Residential Listing Form</h1>
        <p class="subtitle">Browser Automation Testing - Simulating Austin MLS Behavior</p>

        <div style="text-align: center; margin-bottom: 30px;">
            <a href="upload_images.html" class="submit-btn"
                style="display: inline-block; width: auto; text-decoration: none; margin: 0;">Upload Images</a>
        </div>

        <form id="mlsForm">
            <!-- LISTING META -->
            <div class="form-section">
                <h2 class="section-title">Listing Meta</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="listing_agreement">Listing Agreement</label>
                        <select name="listing_meta.listing_agreement" id="listing_agreement">
                            <option value="">-- Select --</option>
                            <option value="Exclusive Right to Sell">Exclusive Right to Sell</option>
                            <option value="Exclusive Agency">Exclusive Agency</option>
                            <option value="Exclusive Right w/ Exception">Exclusive Right w/ Exception</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="listing_service">Listing Service</label>
                        <select name="listing_meta.listing_service" id="listing_service">
                            <option value="">-- Select --</option>
                            <option value="Full Service">Full Service</option>
                            <option value="Limited Service">Limited Service</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="listing_date">Listing Date</label>
                        <input type="text" name="listing_meta.listing_date" id="listing_date" placeholder="MM/DD/YYYY"
                            pattern="\d{2}/\d{2}/\d{4}">
                    </div>
                    <div class="form-group">
                        <label for="expiration_date">Expiration Date</label>
                        <input type="text" name="listing_meta.expiration_date" id="expiration_date"
                            placeholder="MM/DD/YYYY" pattern="\d{2}/\d{2}/\d{4}">
                    </div>
                    <div class="form-group">
                        <label for="list_price">List Price ($)</label>
                        <input type="number" name="listing_meta.list_price" id="list_price" min="0" step="1000">
                    </div>

                    <!-- Listing Special Conditions - Multi-select -->
                    <div class="form-group full-width">
                        <label for="special_conditions">Listing Special Conditions</label>
                        <select name="listing_meta.special_conditions" id="special_conditions" multiple size="4">
                            <option value="None">None</option>
                            <option value="Auction">Auction</option>
                            <option value="Probate">Probate</option>
                            <option value="REO">REO</option>
                            <option value="Short Sale">Short Sale</option>
                            <option value="Estate">Estate</option>
                            <option value="Third Party Approval">Third Party Approval</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- ADDRESS / LOCATION -->
            <div class="form-section">
                <h2 class="section-title">Address / Location</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="street_number">Street Number</label>
                        <input type="text" name="address.street_number" id="street_number">
                    </div>
                    <div class="form-group">
                        <label for="street_dir_prefix">Street Direction Prefix</label>
                        <select name="address.street_dir_prefix" id="street_dir_prefix">
                            <option value="">-- Select --</option>
                            <option value="N">N</option>
                            <option value="S">S</option>
                            <option value="E">E</option>
                            <option value="W">W</option>
                            <option value="NE">NE</option>
                            <option value="NW">NW</option>
                            <option value="SE">SE</option>
                            <option value="SW">SW</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="street_name">Street Name</label>
                        <input type="text" name="address.street_name" id="street_name">
                    </div>
                    <div class="form-group">
                        <label for="street_suffix">Street Suffix</label>
                        <select name="address.street_suffix" id="street_suffix">
                            <option value="">-- Select --</option>
                            <option value="St">St</option>
                            <option value="Ave">Ave</option>
                            <option value="Blvd">Blvd</option>
                            <option value="Rd">Rd</option>
                            <option value="Ln">Ln</option>
                            <option value="Dr">Dr</option>
                            <option value="Ct">Ct</option>
                            <option value="Cir">Cir</option>
                            <option value="Way">Way</option>
                            <option value="Pkwy">Pkwy</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="unit_number">Unit Number</label>
                        <input type="text" name="address.unit_number" id="unit_number">
                    </div>
                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" name="address.city" id="city">
                    </div>
                    <div class="form-group">
                        <label for="state">State</label>
                        <select name="address.state" id="state">
                            <option value="">-- Select --</option>
                            <option value="TX">TX</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="zip_code">ZIP Code</label>
                        <input type="text" name="address.zip_code" id="zip_code">
                    </div>
                    <div class="form-group">
                        <label for="county">County</label>
                        <input type="text" name="address.county" id="county">
                    </div>
                </div>
            </div>

            <!-- SCHOOLS -->
            <div class="form-section">
                <h2 class="section-title">Schools</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="school_district">School District</label>
                        <select name="schools.school_district" id="school_district">
                            <option value="">-- Select --</option>
                            <option value="Austin ISD">Austin ISD</option>
                            <option value="Round Rock ISD">Round Rock ISD</option>
                            <option value="Leander ISD">Leander ISD</option>
                            <option value="Pflugerville ISD">Pflugerville ISD</option>
                            <option value="Lake Travis ISD">Lake Travis ISD</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="elementary_school">Elementary School</label>
                        <input type="text" name="schools.elementary_school" id="elementary_school">
                    </div>
                    <div class="form-group">
                        <label for="middle_school">Middle School</label>
                        <input type="text" name="schools.middle_school" id="middle_school">
                    </div>
                    <div class="form-group">
                        <label for="high_school">High School</label>
                        <input type="text" name="schools.high_school" id="high_school">
                    </div>
                </div>
            </div>

            <!-- PROPERTY DETAILS -->
            <div class="form-section">
                <h2 class="section-title">Property Details</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="property_sub_type">Property Sub Type</label>
                        <select name="property.property_sub_type" id="property_sub_type">
                            <option value="">-- Select --</option>
                            <option value="Single Family Residence">Single Family Residence</option>
                            <option value="Condominium">Condominium</option>
                            <option value="Townhouse">Townhouse</option>
                            <option value="Manufactured Home">Manufactured Home</option>
                            <option value="Modular Home">Modular Home</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ownership_type">Ownership Type</label>
                        <select name="property.ownership_type" id="ownership_type">
                            <option value="">-- Select --</option>
                            <option value="Fee Simple">Fee Simple</option>
                            <option value="Common">Common</option>
                            <option value="Fractional">Fractional</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="levels">Levels</label>
                        <select name="property.levels" id="levels">
                            <option value="">-- Select --</option>
                            <option value="1">1</option>
                            <option value="1.5">1.5</option>
                            <option value="2">2</option>
                            <option value="3+">3+</option>
                            <option value="Multi/Split">Multi/Split</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="year_built">Year Built</label>
                        <input type="number" name="property.year_built" id="year_built" min="1800" max="2030">
                    </div>
                    <div class="form-group">
                        <label for="year_built_source">Year Built Source</label>
                        <select name="property.year_built_source" id="year_built_source">
                            <option value="">-- Select --</option>
                            <option value="Public Records">Public Records</option>
                            <option value="Builder">Builder</option>
                            <option value="Owner">Owner</option>
                            <option value="Appraiser">Appraiser</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="living_area">Living Area (sqft)</label>
                        <input type="number" name="property.living_area" id="living_area" min="0">
                    </div>
                    <div class="form-group">
                        <label for="living_area_source">Living Area Source</label>
                        <select name="property.living_area_source" id="living_area_source">
                            <option value="">-- Select --</option>
                            <option value="Public Records">Public Records</option>
                            <option value="Builder">Builder</option>
                            <option value="Appraiser">Appraiser</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="lot_size">Lot Size (sqft)</label>
                        <input type="number" name="property.lot_size" id="lot_size" min="0">
                    </div>
                    <div class="form-group">
                        <label for="bedrooms">Bedrooms</label>
                        <input type="number" name="property.bedrooms" id="bedrooms" min="0">
                    </div>
                    <div class="form-group">
                        <label for="bathrooms_full">Full Bathrooms</label>
                        <input type="number" name="property.bathrooms_full" id="bathrooms_full" min="0">
                    </div>
                    <div class="form-group">
                        <label for="bathrooms_half">Half Bathrooms</label>
                        <input type="number" name="property.bathrooms_half" id="bathrooms_half" min="0">
                    </div>
                    <div class="form-group">
                        <label for="garage_spaces">Garage Spaces</label>
                        <input type="number" name="property.garage_spaces" id="garage_spaces" min="0">
                    </div>
                    <div class="form-group">
                        <label for="direction_faces">Direction Faces</label>
                        <select name="property.direction_faces" id="direction_faces">
                            <option value="">-- Select --</option>
                            <option value="North">North</option>
                            <option value="South">South</option>
                            <option value="East">East</option>
                            <option value="West">West</option>
                            <option value="Northeast">Northeast</option>
                            <option value="Northwest">Northwest</option>
                            <option value="Southeast">Southeast</option>
                            <option value="Southwest">Southwest</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="property_condition">Property Condition</label>
                        <select name="property.property_condition" id="property_condition">
                            <option value="">-- Select --</option>
                            <option value="New Construction">New Construction</option>
                            <option value="Updated/Remodeled">Updated/Remodeled</option>
                            <option value="Fixer Upper">Fixer Upper</option>
                            <option value="Historic">Historic</option>
                            <option value="Tear Down">Tear Down</option>
                            <option value="See Remarks">See Remarks</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="laundry_location">Laundry Location</label>
                        <select name="property.laundry_location" id="laundry_location">
                            <option value="">-- Select --</option>
                            <option value="Laundry Room">Laundry Room</option>
                            <option value="Garage">Garage</option>
                            <option value="Closet">Closet</option>
                            <option value="Inside">Inside</option>
                            <option value="Outside">Outside</option>
                        </select>
                    </div>

                    <!-- Construction Material - Multi-select -->
                    <div class="form-group full-width">
                        <label for="construction_material">Construction Material</label>
                        <select name="property.construction_material" id="construction_material" multiple size="4">
                            <option value="Brick">Brick</option>
                            <option value="Stone">Stone</option>
                            <option value="Stucco">Stucco</option>
                            <option value="Frame">Frame</option>
                            <option value="Wood Siding">Wood Siding</option>
                            <option value="Hardiplank">Hardiplank</option>
                        </select>
                    </div>

                    <!-- Foundation Details - Multi-select -->
                    <div class="form-group full-width">
                        <label for="foundation_details">Foundation Details</label>
                        <select name="property.foundation_details" id="foundation_details" multiple size="4">
                            <option value="Slab">Slab</option>
                            <option value="Pier & Beam">Pier & Beam</option>
                            <option value="Basement">Basement</option>
                            <option value="Raised">Raised</option>
                            <option value="None">None</option>
                        </select>
                    </div>

                    <!-- Roof - Multi-select -->
                    <div class="form-group full-width">
                        <label for="roof">Roof</label>
                        <select name="property.roof" id="roof" multiple size="4">
                            <option value="Composition">Composition</option>
                            <option value="Shingle">Shingle</option>
                            <option value="Metal">Metal</option>
                            <option value="Tile">Tile</option>
                            <option value="Slate">Slate</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- LOT FEATURES -->
            <div class="form-section">
                <h2 class="section-title">Lot Features</h2>
                <div class="form-group full-width">
                    <label for="lot_features">Lot Features</label>
                    <select name="lot.lot_features" id="lot_features" multiple size="6">
                        <option value="Corner Lot">Corner Lot</option>
                        <option value="Cul-de-sac">Cul-de-sac</option>
                        <option value="Level">Level</option>
                        <option value="Trees ‚Äì Moderate">Trees ‚Äì Moderate</option>
                        <option value="Trees ‚Äì Heavy">Trees ‚Äì Heavy</option>
                        <option value="Sprinkler System">Sprinkler System</option>
                        <option value="City Lot">City Lot</option>
                    </select>
                </div>
            </div>

            <!-- INTERIOR FEATURES -->
            <div class="form-section">
                <h2 class="section-title">Interior Features</h2>
                <div class="form-grid">
                    <!-- Interior Features - Multi-select -->
                    <div class="form-group full-width">
                        <label for="interior_features">Features</label>
                        <select name="interior.interior_features" id="interior_features" multiple size="4">
                            <option value="Kitchen Island">Kitchen Island</option>
                            <option value="Walk-In Closet">Walk-In Closet</option>
                            <option value="Open Floorplan">Open Floorplan</option>
                            <option value="High Ceilings">High Ceilings</option>
                            <option value="Smart Home">Smart Home</option>
                        </select>
                    </div>

                    <!-- Flooring - Multi-select -->
                    <div class="form-group full-width">
                        <label for="flooring">Flooring</label>
                        <select name="interior.flooring" id="flooring" multiple size="4">
                            <option value="Tile">Tile</option>
                            <option value="Wood">Wood</option>
                            <option value="Carpet">Carpet</option>
                            <option value="Vinyl">Vinyl</option>
                            <option value="Concrete">Concrete</option>
                        </select>
                    </div>

                    <!-- Appliances - Multi-select -->
                    <div class="form-group full-width">
                        <label for="appliances">Appliances</label>
                        <select name="interior.appliances" id="appliances" multiple size="6">
                            <option value="Refrigerator">Refrigerator</option>
                            <option value="Dishwasher">Dishwasher</option>
                            <option value="Microwave">Microwave</option>
                            <option value="Oven">Oven</option>
                            <option value="Cooktop">Cooktop</option>
                            <option value="Washer">Washer</option>
                            <option value="Dryer">Dryer</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- EXTERIOR FEATURES -->
            <div class="form-section">
                <h2 class="section-title">Exterior Features</h2>
                <div class="form-grid">
                    <!-- Exterior Features - Multi-select -->
                    <div class="form-group full-width">
                        <label for="exterior_features">Features</label>
                        <select name="exterior.exterior_features" id="exterior_features" multiple size="4">
                            <option value="Balcony">Balcony</option>
                            <option value="Covered Patio">Covered Patio</option>
                            <option value="Deck">Deck</option>
                            <option value="Private Yard">Private Yard</option>
                            <option value="Outdoor Grill">Outdoor Grill</option>
                        </select>
                    </div>

                    <!-- Patio / Porch - Multi-select -->
                    <div class="form-group full-width">
                        <label for="patio_porch">Patio / Porch</label>
                        <select name="exterior.patio_porch" id="patio_porch" multiple size="4">
                            <option value="Covered">Covered</option>
                            <option value="Uncovered">Uncovered</option>
                            <option value="Screened">Screened</option>
                            <option value="Rear Porch">Rear Porch</option>
                            <option value="Front Porch">Front Porch</option>
                        </select>
                    </div>

                    <!-- Pool Features - Multi-select -->
                    <div class="form-group full-width">
                        <label for="pool_features">Pool Features</label>
                        <select name="exterior.pool_features" id="pool_features" multiple size="4">
                            <option value="In-Ground">In-Ground</option>
                            <option value="Heated">Heated</option>
                            <option value="Spa">Spa</option>
                            <option value="None">None</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- UTILITIES & SYSTEMS -->
            <div class="form-section">
                <h2 class="section-title">Utilities & Systems</h2>
                <div class="form-grid">
                    <!-- Utilities - Multi-select -->
                    <div class="form-group full-width">
                        <label for="utilities">Utilities</label>
                        <select name="utilities.utilities" id="utilities" multiple size="4">
                            <option value="Electricity Connected">Electricity Connected</option>
                            <option value="Natural Gas Connected">Natural Gas Connected</option>
                            <option value="Water Connected">Water Connected</option>
                            <option value="Sewer Connected">Sewer Connected</option>
                            <option value="Internet Available">Internet Available</option>
                        </select>
                    </div>

                    <!-- Heating - Multi-select -->
                    <div class="form-group full-width">
                        <label for="heating">Heating</label>
                        <select name="utilities.heating" id="heating" multiple size="4">
                            <option value="Central">Central</option>
                            <option value="Natural Gas">Natural Gas</option>
                            <option value="Electric">Electric</option>
                            <option value="Heat Pump">Heat Pump</option>
                        </select>
                    </div>

                    <!-- Cooling - Multi-select -->
                    <div class="form-group full-width">
                        <label for="cooling">Cooling</label>
                        <select name="utilities.cooling" id="cooling" multiple size="4">
                            <option value="Central Air">Central Air</option>
                            <option value="Zoned">Zoned</option>
                            <option value="Ceiling Fans">Ceiling Fans</option>
                        </select>
                    </div>

                    <!-- Water Source - Multi-select -->
                    <div class="form-group full-width">
                        <label for="water_source">Water Source</label>
                        <select name="utilities.water_source" id="water_source" multiple size="3">
                            <option value="Public">Public</option>
                            <option value="Well">Well</option>
                        </select>
                    </div>

                    <!-- Sewer - Multi-select -->
                    <div class="form-group full-width">
                        <label for="sewer">Sewer</label>
                        <select name="utilities.sewer" id="sewer" multiple size="3">
                            <option value="Public Sewer">Public Sewer</option>
                            <option value="Septic">Septic</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- FINANCIAL -->
            <div class="form-section">
                <h2 class="section-title">Financial</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="association_fee">Association Fee ($)</label>
                        <input type="number" name="financial.association_fee" id="association_fee" min="0" step="1">
                    </div>
                    <div class="form-group">
                        <label for="association_fee_frequency">Association Fee Frequency</label>
                        <select name="financial.association_fee_frequency" id="association_fee_frequency">
                            <option value="">-- Select --</option>
                            <option value="Monthly">Monthly</option>
                            <option value="Quarterly">Quarterly</option>
                            <option value="Annually">Annually</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="tax_amount">Tax Amount ($)</label>
                        <input type="number" name="financial.tax_amount" id="tax_amount" min="0" step="1">
                    </div>
                    <div class="form-group">
                        <label for="possession">Possession</label>
                        <select name="financial.possession" id="possession">
                            <option value="">-- Select --</option>
                            <option value="Closing & Funding">Closing & Funding</option>
                            <option value="Immediate">Immediate</option>
                            <option value="Negotiable">Negotiable</option>
                        </select>
                    </div>

                    <!-- Acceptable Financing - Multi-select -->
                    <div class="form-group full-width">
                        <label for="acceptable_financing">Acceptable Financing</label>
                        <select name="financial.acceptable_financing" id="acceptable_financing" multiple size="4">
                            <option value="Cash">Cash</option>
                            <option value="Conventional">Conventional</option>
                            <option value="FHA">FHA</option>
                            <option value="VA">VA</option>
                            <option value="USDA">USDA</option>
                        </select>
                    </div>

                    <!-- Tax Exemptions - Multi-select -->
                    <div class="form-group full-width">
                        <label for="tax_exemptions">Tax Exemptions</label>
                        <select name="financial.tax_exemptions" id="tax_exemptions" multiple size="3">
                            <option value="Homestead">Homestead</option>
                            <option value="Over 65">Over 65</option>
                            <option value="Disabled Veteran">Disabled Veteran</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- SHOWING -->
            <div class="form-section">
                <h2 class="section-title">Showing</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="occupant_type">Occupant Type</label>
                        <select name="showing.occupant_type" id="occupant_type">
                            <option value="">-- Select --</option>
                            <option value="Owner">Owner</option>
                            <option value="Tenant">Tenant</option>
                            <option value="Vacant">Vacant</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="lockbox_type">Lockbox Type</label>
                        <select name="showing.lockbox_type" id="lockbox_type">
                            <option value="">-- Select --</option>
                            <option value="Combo">Combo</option>
                            <option value="Electronic">Electronic</option>
                            <option value="None">None</option>
                        </select>
                    </div>

                    <!-- Showing Requirements - Multi-select -->
                    <div class="form-group full-width">
                        <label for="showing_requirements">Showing Requirements</label>
                        <select name="showing.showing_requirements" id="showing_requirements" multiple size="4">
                            <option value="Appointment Required">Appointment Required</option>
                            <option value="Showing Service">Showing Service</option>
                            <option value="Lockbox">Lockbox</option>
                            <option value="Call Agent">Call Agent</option>
                            <option value="Go and Show">Go and Show</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- COMMUNITY FEATURES -->
            <div class="form-section">
                <h2 class="section-title">Community Features</h2>
                <div class="form-group full-width">
                    <label for="community_features">Community Features</label>
                    <select name="community.community_features" id="community_features" multiple size="4">
                        <option value="Pool">Pool</option>
                        <option value="Clubhouse">Clubhouse</option>
                        <option value="Park">Park</option>
                        <option value="Fitness Center">Fitness Center</option>
                        <option value="Playground">Playground</option>
                    </select>
                </div>
            </div>

            <!-- BOOLEAN FIELDS -->
            <div class="form-section">
                <h2 class="section-title">Additional Options (Yes/No)</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Flex Listing</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="options.flex_listing" value="true">
                                <span>Yes</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="options.flex_listing" value="false">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Flood Plain</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="options.flood_plain" value="true">
                                <span>Yes</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="options.flood_plain" value="false">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ETJ (Extraterritorial Jurisdiction)</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="options.etj" value="true">
                                <span>Yes</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="options.etj" value="false">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Association</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="options.association" value="true">
                                <span>Yes</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="options.association" value="false">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Seller Contributions</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="options.seller_contributions" value="true">
                                <span>Yes</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="options.seller_contributions" value="false">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Intermediary</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="options.intermediary" value="true">
                                <span>Yes</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="options.intermediary" value="false">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Internet Entire Listing Display</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="options.internet_entire_listing_display" value="true">
                                <span>Yes</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="options.internet_entire_listing_display" value="false">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Internet Automated Valuation Display</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="options.internet_automated_valuation_display" value="true">
                                <span>Yes</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="options.internet_automated_valuation_display" value="false">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Internet Consumer Comment</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="options.internet_consumer_comment" value="true">
                                <span>Yes</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="options.internet_consumer_comment" value="false">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Internet Address Display</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="options.internet_address_display" value="true">
                                <span>Yes</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="options.internet_address_display" value="false">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- REMARKS -->
            <div class="form-section">
                <h2 class="section-title">Remarks</h2>
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label for="public_remarks">Public Remarks</label>
                        <textarea name="remarks.public_remarks" id="public_remarks"
                            placeholder="Enter public-facing property description..."></textarea>
                    </div>
                    <div class="form-group full-width">
                        <label for="private_remarks">Private Remarks (Agent Only)</label>
                        <textarea name="remarks.private_remarks" id="private_remarks"
                            placeholder="Enter private agent notes..."></textarea>
                    </div>
                </div>
            </div>

            <button type="submit" class="submit-btn">Generate Listing JSON</button>
        </form>

        <!-- JSON Output Section -->
        <div id="jsonOutput" class="json-output">
            <h3>üìã Generated CanonicalListing JSON</h3>
            <pre id="jsonContent"></pre>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initializeMultiSelects();
        });

        function initializeMultiSelects() {
            const multiSelects = document.querySelectorAll('select[multiple]');

            multiSelects.forEach(select => {
                // Hide original select
                select.style.display = 'none';

                // Create container
                const container = document.createElement('div');
                container.className = 'multi-select-container';
                select.parentNode.insertBefore(container, select);
                container.appendChild(select);

                // Create header
                const header = document.createElement('div');
                header.className = 'multi-select-header';
                header.textContent = 'Select Options...'; // Initial Text
                container.appendChild(header);

                // Create options list
                const optionsList = document.createElement('div');
                optionsList.className = 'multi-select-options';

                // Populate options
                Array.from(select.options).forEach(option => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'multi-select-option';
                    optionDiv.textContent = option.text;
                    optionDiv.dataset.value = option.value;

                    if (option.selected) {
                        optionDiv.classList.add('selected');
                    }

                    // Click handler for option
                    optionDiv.addEventListener('click', (e) => {
                        e.stopPropagation();
                        // Toggle selected class
                        optionDiv.classList.toggle('selected');

                        // Toggle corresponding native option
                        option.selected = !option.selected;

                        updateHeader(header, select);
                    });

                    optionsList.appendChild(optionDiv);
                });

                container.appendChild(optionsList);

                // Header click to toggle dropdown
                header.addEventListener('click', (e) => {
                    e.stopPropagation();
                    // Close others first
                    document.querySelectorAll('.multi-select-options.open').forEach(el => {
                        if (el !== optionsList) el.classList.remove('open');
                    });
                    optionsList.classList.toggle('open');
                });
            });

            // Click outside to close
            document.addEventListener('click', () => {
                document.querySelectorAll('.multi-select-options.open').forEach(el => {
                    el.classList.remove('open');
                });
            });
        }

        function updateHeader(headerElement, selectElement) {
            const selectedOptions = Array.from(selectElement.selectedOptions);
            if (selectedOptions.length === 0) {
                headerElement.textContent = 'Select Options...';
            } else if (selectedOptions.length === 1) {
                headerElement.textContent = selectedOptions[0].text;
            } else {
                headerElement.textContent = `${selectedOptions.length} selected`;
            }
        }

        document.getElementById('mlsForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const result = {};

            // Process all form elements
            for (const [key, value] of formData.entries()) {
                setNestedValue(result, key, value);
            }

            // Process multi-select dropdowns
            document.querySelectorAll('select[multiple]').forEach(select => {
                const name = select.name;
                const values = Array.from(select.selectedOptions).map(option => option.value);
                if (values.length > 0) {
                    setNestedValue(result, name, values);
                }
            });

            // Process radio buttons (boolean fields)
            document.querySelectorAll('input[type="radio"]:checked').forEach(radio => {
                const name = radio.name;
                const value = radio.value === 'true';
                setNestedValue(result, name, value);
            });

            // Convert numeric fields
            const numericFields = [
                'listing_meta.list_price',
                'property.year_built',
                'property.living_area',
                'property.lot_size',
                'property.bedrooms',
                'property.bathrooms_full',
                'property.bathrooms_half',
                'property.garage_spaces',
                'financial.association_fee',
                'financial.tax_amount'
            ];

            numericFields.forEach(field => {
                const value = getNestedValue(result, field);
                if (value !== undefined && value !== '') {
                    setNestedValue(result, field, parseFloat(value));
                }
            });

            // Display JSON
            const jsonOutput = document.getElementById('jsonOutput');
            const jsonContent = document.getElementById('jsonContent');
            jsonContent.textContent = JSON.stringify(result, null, 2);
            jsonOutput.classList.add('visible');

            // Scroll to output
            jsonOutput.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        function setNestedValue(obj, path, value) {
            const keys = path.split('.');
            let current = obj;

            for (let i = 0; i < keys.length - 1; i++) {
                const key = keys[i];
                if (!(key in current)) {
                    current[key] = {};
                }
                current = current[key];
            }

            const finalKey = keys[keys.length - 1];

            // Handle array values for checkbox groups
            if (Array.isArray(value)) {
                current[finalKey] = value;
            } else if (value !== '') {
                current[finalKey] = value;
            }
        }

        function getNestedValue(obj, path) {
            const keys = path.split('.');
            let current = obj;

            for (const key of keys) {
                if (current === undefined || current === null) {
                    return undefined;
                }
                current = current[key];
            }

            return current;
        }
    </script>
</body>

</html>